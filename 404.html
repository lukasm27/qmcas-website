<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Not Found - QMCAS</title>
    
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <!-- Paste your full header code here -->
    </header>

    <main>
        <div class="container error-page-content">
            <h1>Access Restricted</h1>
            <p>The page you are trying to access is for QMCAS mentees only.</p>
            <p>Please log in to view this content.</p>
            <button class="cta-button" onclick="netlifyIdentity.open()">Log In or Sign Up</button>
        </div>
    </main>

    <footer>
    </footer>
    <script src="nav.js"></script>
    <script>
      if (window.netlifyIdentity) {
        const user = window.netlifyIdentity.currentUser();

        if (user) {
          // A user is ALREADY logged in, but has landed on this 404 page.
          // This means they are stuck in a redirect loop.
          // We break the loop by sending them to a safe page (the homepage).
          window.location.href = "/";
        } else {
          // The user is NOT logged in. This is the correct path for a non-member.
          // We set up the listener that will fire after they successfully log in.
          window.netlifyIdentity.on("login", function() {
            // As you requested, simply reload the page. The browser will try to
            // access the original protected page again, but this time the user
            // will be authenticated and will be granted access.
            location.reload();
          });
        }
      }
    </script>
</body>
</html>
